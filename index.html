<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diner Bill Calculator</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; max-width: 560px; }
    h1 { font-size: 20px; margin: 0 0 16px; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; }
    label { display:block; font-weight: 600; margin-bottom: 6px; }
    input[type="number"] { width: 100%; padding: 10px 12px; border: 1px solid #ccc; border-radius: 10px; font-size: 16px; }
    table { width: 100%; border-collapse: collapse; margin-top: 14px; }
    td { padding: 10px 0; border-bottom: 1px solid #eee; }
    td:last-child { text-align: right; font-variant-numeric: tabular-nums; }
    .total { font-weight: 800; }
    .muted { color: #666; font-size: 12px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Diner Bill Calculator</h1>

  <div class="card">
    <label for="pretax">Total (pre-tax)</label>
    <input id="pretax" type="number" inputmode="decimal" min="0" step="0.01" value="0.00" />

    <table>
      <tr><td>Tax (6%)</td><td id="tax">$0.00</td></tr>
      <tr><td>Total + Tax</td><td id="totalWithTax">$0.00</td></tr>
      <tr><td>Tip (20%)</td><td id="tip">$0.00</td></tr>
      <tr><td>Total + Tax + Tip</td><td id="subtotal">$0.00</td></tr>
      <tr><td>Credit card fee (4% on Total+Tax+Tip)</td><td id="ccFee">$0.00</td></tr>
      <tr class="total"><td>Final Total</td><td id="final">$0.00</td></tr>
    </table>

    <div class="muted">Only the pre-tax total is editable. Rates are fixed in code.</div>
  </div>

  <script>
    // Fixed rates (users cannot change without editing source)
    const TAX = 0.06;
    const TIP = 0.20;
    const CC  = 0.04;

    const $ = (id) => document.getElementById(id);
    const pretaxEl = $("pretax");

    const money = (n) => {
      const x = Number.isFinite(n) ? n : 0;
      return x.toLocaleString(undefined, { style: "currency", currency: "USD" });
    };

    function calc() {
      const total = Math.max(0, parseFloat(pretaxEl.value || "0"));
      const tax = total * TAX;
      const totalWithTax = total + tax;
      const tip = total * TIP;
      const subtotal = totalWithTax + tip;      // Total + tax + tip
      const ccFee = subtotal * CC;              // 4% on subtotal
      const final = subtotal + ccFee;

      $("tax").textContent = money(tax);
      $("totalWithTax").textContent = money(totalWithTax);
      $("tip").textContent = money(tip);
      $("subtotal").textContent = money(subtotal);
      $("ccFee").textContent = money(ccFee);
      $("final").textContent = money(final);
    }

    pretaxEl.addEventListener("input", calc);
    calc();
  </script>
</body>
</html>